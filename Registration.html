<!-- Registration.html -->

    <!-- Adding a Logout Button at the Top -->
    <div style="text-align: right; padding: 10px;">
      <button onclick="logout()">Logout</button>
    </div>

<div>
  <h2 style="color: rgb(99, 5, 208);">NGS Sample Shipment Registration</h2>

  <form id="registrationForm">
    <div>
      <label>Email Address:</label>
      <input type="email" name="email" required>
    </div>
    <div>
      <label>Stakeholder Sending the Sample:</label>
      <select name="stakeholder" required>
        <option value="Doctor and Institution">Doctor and Institution</option>
        <option value="FSO">FSO</option>
        <option value="Direct Patient">Direct Patient</option>
      </select>
    </div>
    <div>
      <label>Patient Name:</label>
      <input type="text" name="patientName" required>
    </div>
    <div>
      <label>Patient Email Address:</label>
      <input type="email" name="patientEmail" required>
    </div>
    <div>
      <label>Patient Phone Number:</label>
      <input type="tel" name="patientPhone" required>
    </div>
    <div>
      <label>Sender (Doctor or FSO) Name:</label>
      <input type="text" name="senderName" required>
    </div>
    <div>
      <label>Sender (Doctor or FSO) Email Address:</label>
      <input type="email" name="senderEmail" required>
    </div>
    <div>
      <label>Sender (Doctor or FSO) Phone Number:</label>
      <input type="tel" name="senderPhone" required>
    </div>
    <div>
      <label>Address of Sender (Doctor or FSO) with PINCODE:</label>
      <textarea name="senderAddress" required></textarea>
    </div>
    <div>
      <label>Molecular Test Opted:</label>
      <select name="testOpted" required>
        <option value="WGS">WGS</option>
        <option value="WES">WES</option>
        <option value="K500+">K500+</option>
        <option value="K75">K75</option>
        <option value="K50">K50</option>
        <option value="Other">Other</option>
      </select>
    </div>
    <div>
      <label>Molecular Dx Bar Code Number:</label>
      <input type="text" name="barcodeNumber" required>
    </div>
    <div>
      <button type="submit">Submit</button>
    </div>
  </form>
</div>


<script>
  document.getElementById('registrationForm').addEventListener('submit', function(e) {
    e.preventDefault();
    var formData = new FormData(e.target);

    google.script.run.withSuccessHandler(function(response) {
      alert(response); // Display the appropriate message
      if(response === "Form is Submitted and Kit Barcode Matches with User") {
        e.target.reset(); // Reset the form only if successful
      }
      // Handle other responses
      else if(response.startsWith("Error:")) {
        alert(response); // Show the error message
      }
    }).submitRegistrationForm(Object.fromEntries(formData));
  });

  function showLoginView() {
    // Hide all other views
    var views = document.getElementsByClassName('view-container');
    for (var i = 0; i < views.length; i++) {
      views[i].style.display = 'none';
    }

    // Show the login view
    document.getElementById('login').style.display = 'block';
  }

  function logout() {
    showLoginView();
    // Perform any other logout cleanup needed
  }

</script>


